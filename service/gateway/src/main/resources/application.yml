spring:
  application:
    name: gateway-coralzinho
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:local}

  data:
    mongodb:
      uri: mongodb://admin:password123@${MONGODB_HOST:localhost}:${MONGODB_PORT:27017}/coralzinho?authSource=admin
      database: coralzinho

  # Configuração mais limpa das filas usando YAML anchors
  mq: &mq-config
    autenticacao:
      login-req:
        exchange: "autenticacao.exchange"
        routing-key: "autenticacao.login.req"
        queue: "autenticacao.login.req.queue"
      login-res:
        exchange: "autenticacao.exchange"
        routing-key: "autenticacao.login.res"
        queue: "autenticacao.login.res.queue"
      cadastro-req:
        exchange: "autenticacao.exchange"
        routing-key: "autenticacao.cadastro.req"
        queue: "autenticacao.cadastro.req.queue"
      cadastro-res:
        exchange: "autenticacao.exchange"
        routing-key: "autenticacao.cadastro.res"
        queue: "autenticacao.cadastro.res.queue"

    crianca:
      adicionar-req:
        exchange: "crianca.exchange"
        routing-key: "crianca.adicionar.req"
        queue: "crianca.adicionar.req.queue"
      adicionar-res:
        exchange: "crianca.exchange"
        routing-key: "crianca.adicionar.res"
        queue: "crianca.adicionar.res.queue"
      atualizar-req:
        exchange: "crianca.exchange"
        routing-key: "crianca.atualizar.req"
        queue: "crianca.atualizar.req.queue"
      atualizar-res:
        exchange: "crianca.exchange"
        routing-key: "crianca.atualizar.res"
        queue: "crianca.atualizar.res.queue"
      buscar-req:
        exchange: "crianca.exchange"
        routing-key: "crianca.buscar.req"
        queue: "crianca.buscar.req.queue"
      buscar-res:
        exchange: "crianca.exchange"
        routing-key: "crianca.buscar.res"
        queue: "crianca.buscar.res.queue"

    presenca:
      registrar-req:
        exchange: "presenca.exchange"
        routing-key: "presenca.registrar.req"
        queue: "presenca.registrar.req.queue"

    professor:
      aniversariantes-req:
        exchange: "professor.exchange"
        routing-key: "professor.aniversariantes.req"
        queue: "professor.aniversariantes.req.queue"
      aniversariantes-res:
        exchange: "professor.exchange"
        routing-key: "professor.aniversariantes.res"
        queue: "professor.aniversariantes.res.queue"
      horario-req:
        exchange: "professor.exchange"
        routing-key: "professor.horario.req"
        queue: "professor.horario.req.queue"
      qrcode-req:
        exchange: "professor.exchange"
        routing-key: "professor.qrcode.req"
        queue: "professor.qrcode.req.queue"
      qrcode-res:
        exchange: "professor.exchange"
        routing-key: "professor.qrcode.res"
        queue: "professor.qrcode.res.queue"

  rabbitmq:
    host: ${RABBITMQ_HOST:localhost}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_USERNAME:guest}
    password: ${RABBITMQ_PASSWORD:guest}
    virtual-host: ${RABBITMQ_VHOST:/}
    connection-timeout: ${RABBITMQ_CONNECTION_TIMEOUT:30000}
    requested-heartbeat: ${RABBITMQ_HEARTBEAT:60}

server:
  port: ${APP_PORT:50001}

logging:
  level:
    org.springframework.data.mongodb: INFO
    org.springframework.amqp: INFO
    com.rabbitmq: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: when_authorized